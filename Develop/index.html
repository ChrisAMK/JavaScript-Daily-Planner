<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
      integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <title>Work Day Scheduler</title>
  </head>

  <body>
    <header class="jumbotron">
      <h1 class="display-3">Work Day Scheduler</h1>
      <p class="lead">A simple calendar app for scheduling your work day</p>
      <p id="currentDay" class="lead"></p>
    </header>
    <div class="container">
      <!-- Timeblocks go here -->
      <div class="row" id="9am">
        <p class="hour col-1">9am</p>
        <input type="text" class="col-10" id="9amText" time="9"></input>
        <button class="saveBtn col-1" id="9amBtn"><i class="far fa-save"></i></button>
      </div>
      <div class="row" id="10am">
        <p class="hour col-1">10am</p>
        <input type="text" class="col-10" id="10amText" time="10"></input>
        <button class="saveBtn col-1" id="10amBtn"><i class="far fa-save"></i></button>
      </div>
      <div class="row" id="11am">
        <p class="hour col-1">11am</p>
        <input type="text" class="col-10" id="11amText" time="11"></input>
        <button class="saveBtn col-1" id="11amBtn"><i class="far fa-save"></i></button>
      </div>
      <div class="row" id="12pm">
        <p class="hour col-1">12pm</p>
        <input type="text" class="col-10" id="12pmText" time="12"></input>
        <button class="saveBtn col-1" id="12pmBtn"><i class="far fa-save"></i></button>
      </div>
      <div class="row" id="1pm">
        <p class="hour col-1">1pm</p>
        <input type="text" class="col-10" id="1pmText" time="13"></input>
        <button class="saveBtn col-1" id="1pmBtn"><i class="far fa-save"></i></button>
      </div>
      <div class="row" id="2pm">
        <p class="hour col-1">2pm</p>
        <input type="text" class="col-10" id="2pmText" time="14"></input>
        <button class="saveBtn col-1" id="2pmBtn"><i class="far fa-save"></i></button>
      </div>
      <div class="row" id="3pm">
        <p class="hour col-1">3pm</p>
        <input type="text" class="col-10" id="3pmText" time="15"></input>
        <button class="saveBtn col-1" id="3pmBtn"><i class="far fa-save"></i></button>
      </div>
      <div class="row" id="4pm">
        <p class="hour col-1">4pm</p>
        <input type="text" class="col-10" id="4pmText" time="16"></input>
        <button class="saveBtn col-1" id="4pmBtn"><i class="far fa-save"></i></button>
      </div>
      <div class="row" id="5pm">
        <p class="hour col-1">5pm</p>
        <input type="text" class="col-10" id="5pmText" time="17"></input>
        <button class="saveBtn col-1" id="5pmBtn"><i class="far fa-save"></i></button>
      </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    <script type="text/javascript">

      $(document).ready(function() {
        // Selecting all my HTML elements to simplify code
        var text9 = $("#9amText")
        var text10 = $("#10amText")
        var text11 = $("#11amText")
        var text12 = $("#12pmText")
        var text1 = $("#1pmText")
        var text2 = $("#2pmText")
        var text3 = $("#3pmText")
        var text4 = $("#4pmText")
        var text5 = $("#5pmText")

        var text9Btn = $("#9amBtn")
        var text10Btn = $("#10amBtn")
        var text11Btn = $("#11amBtn")
        var text12Btn = $("#12pmBtn")
        var text1Btn = $("#1pmBtn")
        var text2Btn = $("#2pmBtn")
        var text3Btn = $("#3pmBtn")
        var text4Btn = $("#4pmBtn")
        var text5Btn = $("#5pmBtn")

        // This function Displays any Daily tasks that are stored in local storage, it will be called as the page is loaded
        function renderText() {
          text9.val(localStorage.getItem("Text9"))
          text10.val(localStorage.getItem("Text10"))
          text11.val(localStorage.getItem("Text11"))
          text12.val(localStorage.getItem("Text12"))
          text1.val(localStorage.getItem("Text1"))
          text2.val(localStorage.getItem("Text2"))
          text3.val(localStorage.getItem("Text3"))
          text4.val(localStorage.getItem("Text4"))
          text5.val(localStorage.getItem("Text5"))
        }

        // Calling the renderText Function to  display set tasks
        renderText();

        // Moment.js Applying the appropriate classes dependent on the time.
        var now = parseInt(moment().format('HH'))
  
        $("input").each(function() {
          var name = parseInt($(this).attr("time"))
          if (name < now) {
            $(this).addClass("past")
          }
          if (name > now) {
            $(this).addClass("future")
          }
          if (name == now) {
            $(this).addClass("present")
        }})

        // this code is to display the current day at the top of the screen.
        var theday = moment().format('MMMM Do YYYY');
        $("#currentDay").html(theday);

        // User writes into the input element, when the corresponding save button is pressed, whatever text there is set to Local Storage.
        text9Btn.on("click", function() {
          localStorage.setItem("Text9", text9.val())
        })

        text10Btn.on("click", function() {
          localStorage.setItem("Text10", text10.val())
        })

        text11Btn.on("click", function() {
          localStorage.setItem("Text11", text11.val())
        })

        text12Btn.on("click", function() {
          localStorage.setItem("Text12", text12.val())
        })

        text1Btn.on("click", function() {
          localStorage.setItem("Text1", text1.val())
        })

        text2Btn.on("click", function() {
          localStorage.setItem("Text2", text2.val())
        })

        text3Btn.on("click", function() {
          localStorage.setItem("Text3", text3.val())
        })

        text4Btn.on("click", function() {
          localStorage.setItem("Text4", text4.val())
        })

        text5Btn.on("click", function() {
          localStorage.setItem("Text5", text5.val())
        })
      });
      </script>
  </body>
</html>